- name: remove existing {{app_dir}}
  file:
    path: '{{app_dir}}'
    state: absent

- name: create empty '{{app_dir}}'
  file:
    path: '{{app_dir}}'
    state: directory
    owner: '{{app_user}}'
    recurse: yes

- name: copy service file
  copy:
    src: '{{playbook_dir}}/../{{item}}'
    dest: '{{app_dir}}'
    owner: '{{app_user}}'
    mode: 'preserve'
  with_items:
    - zhdk-agw-auth-system.rb
    - Gemfile
    - Gemfile.lock
    - .tool-versions
